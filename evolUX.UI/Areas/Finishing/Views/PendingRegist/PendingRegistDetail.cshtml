@using Shared.Models.Areas.Finishing
@using Shared.ViewModels.Areas.Finishing
@using Newtonsoft.Json;
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer localizer

@model PendingRegistDetailViewModel;
@*https://www.w3.org/WAI/tutorials/tables/irregular/  https://datatables.net/extensions/buttons/examples/column_visibility/index.html*@

<style>
    .hideextra {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
</style>
<div class="d-flex justify-content-center" >
    <div class="spinner-border" role="status" id="myLoader" style="display:none">
      <span class="sr-only">Loading...</span>
    </div>
    <div class="d-flex justify-content-center">
        <h2 class="display-4 text-center">@ViewBag.RunName</h2>
    </div>
</div>
<div class="my-3 table-div">
@if (Model.PendingRegistDetail.ToRegistPrintFiles.Count > 0)
{
        <table class="table table-sm table-hover table-collapse-seperate">
            @if (ViewBag.hasMultipleServiceCompanies)
            {
            <col>
            }
            <col>
            <col>
            <col>
            <col>
            <col>
            <col>
            <thead id="bootstrap-overrides" class="table-info sticky-header">
                <tr class="text-center">
                    @if (ViewBag.hasMultipleServiceCompanies)
                    {
                    <th>@localizer["ServiceCompanyCode"]</th>
                    }
                    <th>@localizer["FileName"]</th>
                    <th>@localizer["RunID"]</th>
                    <th>@localizer["FileID"]</th>
                    <th>@localizer["SentToPrinterTimeStamp"]</th>
                    <th>@localizer["Operator"]</th>
                    <th>@localizer["Printer"]</th>
                </tr>
            </thead>
            <tbody id="bootstrap-overrides">
                @if (Model == null)
                {
                    <tr><td colspan="5" class="text-center">No Model Data</td></tr>
                }
                else
                {
                    @foreach (PendingRegistElement p in Model.PendingRegistDetail.ToRegistPrintFiles)
                    {
                        <tr>
                            @if (ViewBag.hasMultipleServiceCompanies)
                            {
                            <td>@p.ServiceCompanyCode</td>
                            }
                            <td>@p.FileName</td>
                            <td>@p.RunID</td>
                            <td>@p.FileID</td>
                            <td>@p.TimeStamp</td>
                            <td>@p.Operator</td>
                            <td>@p.Printer</td>
                        </tr>
                    }
                }
            </tbody>
        </table>
} else
{
    <div class="d-flex justify-content-center m-5">@localizer["NoToRegistPrintFiles"]</div>
}
if (Model.PendingRegistDetail.ToRegistFullfillFiles.Count > 0)
{
        <table class="table table-sm table-hover table-collapse-seperate">
            <col>
            <col>
            <col>
            <col>
            <col>
            <thead id="bootstrap-overrides" class="table-info sticky-header">
                <tr class="text-center">
                    <th>@localizer["FileName"]</th>
                    <th>@localizer["RunID"]</th>
                    <th>@localizer["FileID"]</th>
                    <th>@localizer["PrintedTimeStamp"]</th>
                    <th>@localizer["Operator"]</th>
                </tr>
            </thead>
            <tbody id="bootstrap-overrides">
                @if (Model == null)
                {
                    <tr><td colspan="5" class="text-center">No Model Data</td></tr>
                }
                else
                {
                    @foreach (PendingRegistElement p in Model.PendingRegistDetail.ToRegistPrintFiles)
                    {
                        <tr>
                            <td class="headcol" style="background: var(--lightestgrey)">@p.FileName</td>
                            <td>@p.RunID</td>
                            <td>@p.FileID</td>
                            <td>@p.TimeStamp</td>
                            <td>@p.Operator</td>
                        </tr>
                    }
                }
            </tbody>
        </table>
}
else
{
    <div class="d-flex justify-content-center m-5">@localizer["NoToRegistFullfillFiles"]</div>
}    
</div>


