@using Shared.Models.Areas.evolDP
@using Shared.ViewModels.Areas.evolDP
@using Newtonsoft.Json;
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer localizer
@inject IConfiguration configuration

@model DocCodeViewModel;
@{
    string siteURL = configuration.GetValue<string>("evolUXSiteURL");
}
@if (Model == null)
{
    <tr><td colspan="5" class="text-center">@localizer["NoModelData"]</td></tr>
}
else
{
    <a asp-area="evolDP" asp-controller="DocCode" asp-action="AddDocCode" asp-route-doccode="@Model.DocCodeList.First()">
        <img style="background:none; width:50px;height:50px;" src="@siteURL/images/add_doc.png" title="@localizer["AddDocCode"]" />
    </a>
    <table class="table table-sm table-hover table-collapse-seperate">
        <thead id="bootstrap-overrides" class="table-info sticky-header">
            <tr>
                <th>@localizer["DocLayout"]</th>
                <th>@localizer["DocType"]</th>
                <th>@localizer["ExceptionLevel1ID"]</th>
                <th>@localizer["ExceptionLevel2ID"]</th>
                <th>@localizer["ExceptionLevel3ID"]</th>
                <th>@localizer["DocDescription"]</th>
            </tr>
        </thead>
        <tbody id="bootstrap-overrides">
            @foreach (var p in Model.DocCodeList)
            {
                <tr>
                    <td><a asp-area="evolDP" asp-controller="DocCode" asp-action="DocCodeConfig" asp-route-doccode="@p">@p.DocLayout</a></td>
                    <td>@p.DocType</td>
                    <td>
                        @if (p.ExceptionLevel1 == null || string.IsNullOrEmpty(p.ExceptionLevel1.ExceptionDescription))
                        {
                            @localizer["EmptyField"]
                        }
                        else
                        {
                            @p.ExceptionLevel1.ExceptionDescription
                        }
                    </td>
                    <td>
                        @if (p.ExceptionLevel2 == null || string.IsNullOrEmpty(p.ExceptionLevel2.ExceptionDescription))
                        {
                            @localizer["EmptyField"]
                        }
                        else
                        {
                            @p.ExceptionLevel2.ExceptionDescription
                        }
                    </td>
                    <td>
                        @if (p.ExceptionLevel3 == null || string.IsNullOrEmpty(p.ExceptionLevel3.ExceptionDescription))
                        {
                            @localizer["EmptyField"]
                        }
                        else
                        {
                            @p.ExceptionLevel3.ExceptionDescription
                        }
                    </td>
                    <td>@p.DocDescription</td>
                </tr>
            }
        </tbody>
    </table>
}